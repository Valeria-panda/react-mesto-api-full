[{"C:\\Users\\solat\\dev\\react-auth\\src\\index.js":"1","C:\\Users\\solat\\dev\\react-auth\\src\\components\\App.js":"2","C:\\Users\\solat\\dev\\react-auth\\src\\reportWebVitals.js":"3","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Main.js":"4","C:\\Users\\solat\\dev\\react-auth\\src\\components\\ImagePopup.js":"5","C:\\Users\\solat\\dev\\react-auth\\src\\components\\EditAvatarPopup.js":"6","C:\\Users\\solat\\dev\\react-auth\\src\\components\\EditProfilePopup.js":"7","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Footer.js":"8","C:\\Users\\solat\\dev\\react-auth\\src\\components\\AddPlacePopup.js":"9","C:\\Users\\solat\\dev\\react-auth\\src\\components\\ConfirmPopup.js":"10","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Header.js":"11","C:\\Users\\solat\\dev\\react-auth\\src\\utils\\Api.js":"12","C:\\Users\\solat\\dev\\react-auth\\src\\contexts\\CurrentUserContext.js":"13","C:\\Users\\solat\\dev\\react-auth\\src\\components\\ProtectedRoute.js":"14","C:\\Users\\solat\\dev\\react-auth\\src\\components\\InfoTooltip.js":"15","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Login.js":"16","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Register.js":"17","C:\\Users\\solat\\dev\\react-auth\\src\\utils\\auth.js":"18","C:\\Users\\solat\\dev\\react-auth\\src\\utils\\constant.js":"19","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Card.js":"20","C:\\Users\\solat\\dev\\react-auth\\src\\components\\PopupWithForm.js":"21","C:\\Users\\solat\\dev\\react-auth\\src\\components\\AuthInfo.js":"22","C:\\Users\\solat\\dev\\react-auth\\src\\components\\AuthorizeForm.js":"23","C:\\Users\\solat\\dev\\react-auth\\src\\components\\Form.js":"24","C:\\Users\\solat\\dev\\react-auth\\src\\errors\\notAuthorizedError.js":"25","C:\\Users\\solat\\dev\\react-auth\\src\\errors\\badRequestError.js":"26","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\index.js":"27","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\App.js":"28","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js":"29","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Footer.js":"30","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js":"31","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Main.js":"32","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Header.js":"33","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js":"34","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ConfirmPopup.js":"35","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js":"36","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js":"37","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\Api.js":"38","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js":"39","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Login.js":"40","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js":"41","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js":"42","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Register.js":"43","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\auth.js":"44","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\constant.js":"45","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Card.js":"46","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AuthInfo.js":"47","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js":"48","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AuthorizeForm.js":"49","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\errors\\notAuthorizedError.js":"50","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\errors\\badRequestError.js":"51","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Form.js":"52"},{"size":639,"mtime":1609752583081,"results":"53","hashOfConfig":"54"},{"size":10470,"mtime":1610209508264,"results":"55","hashOfConfig":"54"},{"size":362,"mtime":499162500000,"results":"56","hashOfConfig":"54"},{"size":1701,"mtime":1609338730833,"results":"57","hashOfConfig":"54"},{"size":575,"mtime":1609338730827,"results":"58","hashOfConfig":"54"},{"size":1086,"mtime":1610187088263,"results":"59","hashOfConfig":"54"},{"size":2402,"mtime":1610187080167,"results":"60","hashOfConfig":"54"},{"size":219,"mtime":1609338730815,"results":"61","hashOfConfig":"54"},{"size":2223,"mtime":1609749647422,"results":"62","hashOfConfig":"54"},{"size":589,"mtime":1610187095810,"results":"63","hashOfConfig":"54"},{"size":841,"mtime":1610019709043,"results":"64","hashOfConfig":"54"},{"size":2751,"mtime":1609338772308,"results":"65","hashOfConfig":"54"},{"size":86,"mtime":1609338750925,"results":"66","hashOfConfig":"54"},{"size":370,"mtime":1609338730840,"results":"67","hashOfConfig":"54"},{"size":583,"mtime":1610175603674,"results":"68","hashOfConfig":"54"},{"size":511,"mtime":1610207757876,"results":"69","hashOfConfig":"54"},{"size":575,"mtime":1610211098773,"results":"70","hashOfConfig":"54"},{"size":2060,"mtime":1611511850855,"results":"71","hashOfConfig":"54"},{"size":220,"mtime":1609338772310,"results":"72","hashOfConfig":"54"},{"size":1912,"mtime":1609338730807,"results":"73","hashOfConfig":"54"},{"size":861,"mtime":1610187035397,"results":"74","hashOfConfig":"54"},{"size":275,"mtime":1610177030287,"results":"75","hashOfConfig":"54"},{"size":3689,"mtime":1610187444433,"results":"76","hashOfConfig":"54"},{"size":1308,"mtime":1610186904752,"results":"77","hashOfConfig":"54"},{"size":207,"mtime":1611411863941,"results":"78","hashOfConfig":"54"},{"size":201,"mtime":1611411900336,"results":"79","hashOfConfig":"54"},{"size":639,"mtime":1609752583081,"results":"80","hashOfConfig":"81"},{"size":10915,"mtime":1611606500940,"results":"82","hashOfConfig":"81"},{"size":362,"mtime":499162500000,"results":"83","hashOfConfig":"81"},{"size":219,"mtime":1609338730815,"results":"84","hashOfConfig":"81"},{"size":575,"mtime":1609338730827,"results":"85","hashOfConfig":"81"},{"size":1701,"mtime":1609338730833,"results":"86","hashOfConfig":"81"},{"size":841,"mtime":1610019709043,"results":"87","hashOfConfig":"81"},{"size":1086,"mtime":1610187088263,"results":"88","hashOfConfig":"81"},{"size":589,"mtime":1610187095810,"results":"89","hashOfConfig":"81"},{"size":2402,"mtime":1610187080167,"results":"90","hashOfConfig":"81"},{"size":2223,"mtime":1609749647422,"results":"91","hashOfConfig":"81"},{"size":2763,"mtime":1611641000571,"results":"92","hashOfConfig":"81"},{"size":86,"mtime":1609338750925,"results":"93","hashOfConfig":"81"},{"size":511,"mtime":1610207757876,"results":"94","hashOfConfig":"81"},{"size":583,"mtime":1610175603674,"results":"95","hashOfConfig":"81"},{"size":370,"mtime":1609338730840,"results":"96","hashOfConfig":"81"},{"size":575,"mtime":1610211098773,"results":"97","hashOfConfig":"81"},{"size":2162,"mtime":1611640814670,"results":"98","hashOfConfig":"81"},{"size":220,"mtime":1611640935987,"results":"99","hashOfConfig":"81"},{"size":1912,"mtime":1609338730807,"results":"100","hashOfConfig":"81"},{"size":275,"mtime":1610177030287,"results":"101","hashOfConfig":"81"},{"size":861,"mtime":1610187035397,"results":"102","hashOfConfig":"81"},{"size":3689,"mtime":1610187444433,"results":"103","hashOfConfig":"81"},{"size":207,"mtime":1611411863941,"results":"104","hashOfConfig":"81"},{"size":201,"mtime":1611411900336,"results":"105","hashOfConfig":"81"},{"size":1308,"mtime":1610186904752,"results":"106","hashOfConfig":"81"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},"fp2qxe",{"filePath":"110","messages":"111","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"109"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"157","messages":"158","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},"rx8xol",{"filePath":"164","messages":"165","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"166","usedDeprecatedRules":"163"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"171","messages":"172","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"177","messages":"178","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"179","messages":"180","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"181","messages":"182","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"183","messages":"184","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"185","messages":"186","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"187","messages":"188","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"189","messages":"190","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"191","messages":"192","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"193","messages":"194","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"197","messages":"198","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"199","messages":"200","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"201","messages":"202","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"203","messages":"204","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"205","messages":"206","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"209","messages":"210","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"211","messages":"212","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"163"},{"filePath":"213","messages":"214","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\solat\\dev\\react-auth\\src\\index.js",[],["215","216"],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\App.js",["217"],"\r\nimport React, { useState }  from 'react';\r\nimport {\r\n  Route, Switch, useLocation, Redirect, useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport '../index.css';\r\nimport { api } from '../utils/Api.js';\r\nimport Header from '../components/Header.js';\r\nimport Main from '../components/Main.js';\r\nimport Footer from '../components/Footer.js';\r\nimport ImagePopup from '../components/ImagePopup.js';\r\nimport EditAvatarPopup from '../components/EditAvatarPopup.js';\r\nimport EditProfilePopup from '../components/EditProfilePopup.js';\r\nimport AddPlacePopup from '../components/AddPlacePopup.js';\r\nimport ConfirmPopup from './ConfirmPopup.js';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as auth from '../utils/auth';\r\nimport { CurrentUserContext }  from '../contexts/CurrentUserContext.js'\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport resolvePath from '../images/resolve.svg';\r\nimport rejectPath from '../images/reject.svg';\r\nimport loading from '../images/loading.svg';\r\n\r\n\r\nfunction App() {\r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmPopupOpen, setConfirmPopupOpen] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState({\r\n    isImageOpen: false,\r\n    link: '',\r\n    name: '',\r\n  });\r\n\r\n  const [currentUser, setCurrentUser] = useState({})\r\n  const [cardToDelete, setCardToDelete] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  // авторизация\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [isAuthInfoOpened, setAuthInfoOpened] = useState(false);\r\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = useState(false);\r\n  const [message, setMessage] = useState({\r\n    iconPath: loading,\r\n    text: ''\r\n  });\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const escape = require('escape-html');\r\n\r\n  // Проверить токен\r\n  React.useEffect(() => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth.getContent(jwt)\r\n        .then((res) => {\r\n          setLoggedIn(true);\r\n          setEmail(res.data.email);\r\n          history.push('/');\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  }, [history]);\r\n\r\n  // Регистрация\r\n  function handleRegister(password, email) {\r\n    auth.register(escape(password), email)\r\n      .then(() => {\r\n        setMessage({ iconPath: resolvePath, text: 'Вы успешно зарегистрировались!' });\r\n        history.push('/sign-in');\r\n      })\r\n      .catch((err) => setMessage({ iconPath: rejectPath, text: err.message }));\r\n    setInfoTooltipOpen(true);\r\n  }\r\n\r\n  // Авторизация\r\n  function handleLogin(password, email) {\r\n    auth.authorize(escape(password), email)\r\n      .then((data) => {\r\n        auth.getContent(data)\r\n          .then((res) => {\r\n            setEmail(res.data.email);\r\n          })\r\n          .catch(err => console.log(err));\r\n        setLoggedIn(true);\r\n        setMessage({ iconPath: resolvePath, text: 'Вы успешно вошли в приложение!' });\r\n        history.push('/');\r\n      })\r\n      .catch((err) => setMessage({ iconPath: rejectPath, text: err.message }))\r\n    setInfoTooltipOpen(true);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    localStorage.removeItem('jwt');\r\n    setEmail('');\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  //данные о текущем пользователе\r\n  React.useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((currentUserInfoData) => {\r\n        setCurrentUser(currentUserInfoData);\r\n      })\r\n      .catch((err) =>\r\n        console.log(`Ошибка при загрузке информации о пользователе: ${err}`)\r\n      );\r\n  }, []);\r\n\r\n  //Открыть попап аватара\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n  //Открыть попап профииля\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n  //Открыть попап карточки\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n  // открыть фулсайз фото\r\n  function handleCardClick(card) {\r\n    const { link, name } = card;\r\n    setSelectedCard({ isImageOpen: true, link: link, name: name });\r\n  }\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) =>\r\n        console.log(`Ошибка при постановке лайка: ${err}`)\r\n    );\r\n  } \r\n   //Удалить карточку после подтверждения\r\n   function handleConfirm() {\r\n    api\r\n      .deleteCard(cardToDelete._id)\r\n      .then(() =>{\r\n        setCards(cards.filter((item) => item !== cardToDelete))\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(`Ошибка при удалении карточки: ${err}`));\r\n    \r\n  }\r\n  //Кликнуть на удаление карточки\r\n  function handleCardDelete(card) {\r\n    setConfirmPopupOpen(true);\r\n    setCardToDelete(card);\r\n  }\r\n  //Закрыть все попапы\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setSelectedCard({});\r\n    setConfirmPopupOpen(false);\r\n    setInfoTooltipOpen(false)\r\n  }\r\n  //Обновить аватар\r\n  function handleUpdateAvatar(newAvatar) {\r\n      setLoading(true);\r\n      api\r\n        .setUserAvatar(newAvatar)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => console.log(`Ошибка при обновлении аватара: ${err}`))\r\n        .finally(() => setLoading(false));\r\n        \r\n  }\r\n  //Обновить данные пользователя\r\n  function handleUpdateUser(userData) {\r\n      setLoading(true);\r\n      api\r\n        .updateUserInfo(userData)\r\n        .then((newUser) => {\r\n          setCurrentUser(newUser);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => `Ошибка при обновлении информации о пользователе: ${err}`)\r\n        .finally(() => setLoading(false));\r\n      \r\n  }\r\n  //Получить данные карточек с фото\r\n  React.useEffect(() => {\r\n      api\r\n        .getInitialCards()\r\n        .then((cardData) => {\r\n          setCards(cardData);\r\n        })\r\n        .catch((err) => console.log(`Ошибка при загрузке карточек: ${err}`));\r\n  }, []);\r\n  \r\n  function handleAddPlace(card) {\r\n      setLoading(true);\r\n      api\r\n        .postNewCard(card)\r\n        .then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) =>\r\n          console.log(`Ошибка при добавлении новой карточки: ${err}`)\r\n        )\r\n        .finally(() => setLoading(false));\r\n      \r\n  }\r\n    \r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n        <div className=\"root\">\r\n          <div className=\"page\">\r\n          {(loggedIn && isAuthInfoOpened)}\r\n\r\n            <Header loggedIn={loggedIn}\r\n                    locaction={location}\r\n                    email={email}\r\n                    signOut={handleSignOut}\r\n                    isAuthInfoOpened={isAuthInfoOpened}\r\n            />\r\n            <Switch>\r\n      \r\n            <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main}\r\n                    cards={cards}\r\n                    onCardClick={handleCardClick}\r\n                    onCardLike={handleCardLike}\r\n                    onCardDelete={handleCardDelete}\r\n                    onEditProfile={handleEditProfileClick}\r\n                    onAddPlace={handleAddPlaceClick}\r\n                    onEditAvatar={handleEditAvatarClick}\r\n            />\r\n          <Route path='/sign-in'>\r\n            <Login onLogin={handleLogin} />\r\n          </Route>\r\n         \r\n          <Route path='/sign-up'>\r\n            <Register onRegister={handleRegister} />\r\n          </Route>\r\n          <Route>\r\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer />\r\n\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n          message={message}\r\n        />\r\n\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n              isLoading={isLoading}\r\n            />\r\n            <EditAvatarPopup\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              isLoading={isLoading}\r\n            />\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlace}\r\n            />\r\n            <ConfirmPopup\r\n              isOpen={isConfirmPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onConfirmDelete={handleConfirm}\r\n            />\r\n          \r\n            <ImagePopup \r\n            name={selectedCard.name}\r\n            link={selectedCard.link}\r\n            isOpen={selectedCard.isImageOpen}\r\n            onClose={closeAllPopups}\r\n            />\r\n            \r\n          </div>\r\n        </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","C:\\Users\\solat\\dev\\react-auth\\src\\reportWebVitals.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Main.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\ImagePopup.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\EditAvatarPopup.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Footer.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\ConfirmPopup.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Header.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\utils\\Api.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\contexts\\CurrentUserContext.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\InfoTooltip.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Login.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Register.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\utils\\auth.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\utils\\constant.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Card.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\PopupWithForm.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\AuthInfo.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\AuthorizeForm.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\components\\Form.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\errors\\notAuthorizedError.js",[],"C:\\Users\\solat\\dev\\react-auth\\src\\errors\\badRequestError.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\index.js",[],["218","219"],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\App.js",["220","221"],"\r\nimport React, { useState }  from 'react';\r\nimport {\r\n  Route, Switch, useLocation, Redirect, useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport '../index.css';\r\nimport { api } from '../utils/Api.js';\r\nimport Header from '../components/Header.js';\r\nimport Main from '../components/Main.js';\r\nimport Footer from '../components/Footer.js';\r\nimport ImagePopup from '../components/ImagePopup.js';\r\nimport EditAvatarPopup from '../components/EditAvatarPopup.js';\r\nimport EditProfilePopup from '../components/EditProfilePopup.js';\r\nimport AddPlacePopup from '../components/AddPlacePopup.js';\r\nimport ConfirmPopup from './ConfirmPopup.js';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as auth from '../utils/auth';\r\nimport { CurrentUserContext }  from '../contexts/CurrentUserContext.js'\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport resolvePath from '../images/resolve.svg';\r\nimport rejectPath from '../images/reject.svg';\r\nimport loading from '../images/loading.svg';\r\n\r\n\r\nfunction App() {\r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmPopupOpen, setConfirmPopupOpen] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState({\r\n    isImageOpen: false,\r\n    link: '',\r\n    name: '',\r\n  });\r\n\r\n  const [currentUser, setCurrentUser] = useState({})\r\n  const [cardToDelete, setCardToDelete] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  // авторизация\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [isAuthInfoOpened, setAuthInfoOpened] = useState(false);\r\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = useState(false);\r\n  const [message, setMessage] = useState({\r\n    iconPath: loading,\r\n    text: ''\r\n  });\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  // const escape = require('escape-html');\r\n\r\n  \r\n  // Получить данные пользователя\r\n  React.useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n      })\r\n      .catch((err) => console.log(`Ошибка при загрузке информации о пользователе: ${err}`));\r\n  }, []);\r\n  // Проверить токен\r\n  React.useEffect(() => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth.getContent(jwt)\r\n        .then((res) => {\r\n          setLoggedIn(true);\r\n          setEmail(res.data.email);\r\n          history.push('/');\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  }, [history]);\r\n\r\n  // // Регистрация\r\n  function handleRegister(password, email) {\r\n    auth\r\n    .register(password, email)\r\n    // .register(escape(password), email)\r\n      .then(() => {\r\n        setMessage({ iconPath: resolvePath, text: 'Вы успешно зарегистрировались!' });\r\n        history.push('/sign-in');\r\n      })\r\n      .catch((err) => setMessage({ iconPath: rejectPath, text: err.message }));\r\n    setInfoTooltipOpen(true);\r\n  }\r\n\r\n  // // Авторизация\r\n  function handleLogin(password, email) {\r\n    return  auth\r\n    //  .authorize(escape(password), email)\r\n    .authorize(password, email)\r\n      .then((data) => {\r\n        auth\r\n         .getContent(data)\r\n          .then((res) => {\r\n            setEmail(res.data.email);\r\n          })\r\n          .catch(err => console.log(err));\r\n        setLoggedIn(true);\r\n        setMessage({ iconPath: resolvePath, text: 'Вы успешно вошли в приложение!' });\r\n        history.push('/');\r\n      })\r\n      .catch((err) => setMessage({ iconPath: rejectPath, text: err.message }))\r\n    setInfoTooltipOpen(true);\r\n  }\r\n \r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    localStorage.removeItem('jwt');\r\n    setEmail('');\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  //данные о текущем пользователе\r\n  React.useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((currentUserInfoData) => {\r\n        setCurrentUser(currentUserInfoData);\r\n      })\r\n      .catch((err) =>\r\n        console.log(`Ошибка при загрузке информации о пользователе: ${err}`)\r\n      );\r\n  }, []);\r\n\r\n  //Открыть попап аватара\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n  //Открыть попап профииля\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n  //Открыть попап карточки\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n  // открыть фулсайз фото\r\n  function handleCardClick(card) {\r\n    const { link, name } = card;\r\n    setSelectedCard({ isImageOpen: true, link: link, name: name });\r\n  }\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) =>\r\n        console.log(`Ошибка при постановке лайка: ${err}`)\r\n    );\r\n  } \r\n   //Удалить карточку после подтверждения\r\n   function handleConfirm() {\r\n    api\r\n      .deleteCard(cardToDelete._id)\r\n      .then(() =>{\r\n        setCards(cards.filter((item) => item !== cardToDelete))\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(`Ошибка при удалении карточки: ${err}`));\r\n    \r\n  }\r\n  //Кликнуть на удаление карточки\r\n  function handleCardDelete(card) {\r\n    setConfirmPopupOpen(true);\r\n    setCardToDelete(card);\r\n  }\r\n  //Закрыть все попапы\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setSelectedCard({});\r\n    setConfirmPopupOpen(false);\r\n    setInfoTooltipOpen(false)\r\n  }\r\n  //Обновить аватар\r\n  function handleUpdateAvatar(newAvatar) {\r\n      setLoading(true);\r\n      api\r\n        .setUserAvatar(newAvatar)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => console.log(`Ошибка при обновлении аватара: ${err}`))\r\n        .finally(() => setLoading(false));\r\n        \r\n  }\r\n  //Обновить данные пользователя\r\n  function handleUpdateUser(userData) {\r\n      setLoading(true);\r\n      api\r\n        .updateUserInfo(userData)\r\n        .then((newUser) => {\r\n          setCurrentUser(newUser);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) => `Ошибка при обновлении информации о пользователе: ${err}`)\r\n        .finally(() => setLoading(false));\r\n      \r\n  }\r\n  //Получить данные карточек с фото\r\n  React.useEffect(() => {\r\n      api\r\n        .getInitialCards()\r\n        .then((cardData) => {\r\n          setCards(cardData);\r\n        })\r\n        .catch((err) => console.log(`Ошибка при загрузке карточек: ${err}`));\r\n  }, []);\r\n  \r\n  function handleAddPlace(card) {\r\n      setLoading(true);\r\n      api\r\n        .postNewCard(card)\r\n        .then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n          closeAllPopups();\r\n        })\r\n        .catch((err) =>\r\n          console.log(`Ошибка при добавлении новой карточки: ${err}`)\r\n        )\r\n        .finally(() => setLoading(false));\r\n      \r\n  }\r\n    \r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n        <div className=\"root\">\r\n          <div className=\"page\">\r\n          {(loggedIn && isAuthInfoOpened)}\r\n\r\n            <Header loggedIn={loggedIn}\r\n                    locaction={location}\r\n                    email={email}\r\n                    signOut={handleSignOut}\r\n                    isAuthInfoOpened={isAuthInfoOpened}\r\n            />\r\n            <Switch>\r\n      \r\n            <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main}\r\n                    cards={cards}\r\n                    onCardClick={handleCardClick}\r\n                    onCardLike={handleCardLike}\r\n                    onCardDelete={handleCardDelete}\r\n                    onEditProfile={handleEditProfileClick}\r\n                    onAddPlace={handleAddPlaceClick}\r\n                    onEditAvatar={handleEditAvatarClick}\r\n            />\r\n          <Route path='/sign-in'>\r\n            <Login onLogin={handleLogin} />\r\n          </Route>\r\n         \r\n          <Route path='/sign-up'>\r\n            <Register onRegister={handleRegister} />\r\n          </Route>\r\n          <Route>\r\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer />\r\n\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n          message={message}\r\n        />\r\n\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n              isLoading={isLoading}\r\n            />\r\n            <EditAvatarPopup\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              isLoading={isLoading}\r\n            />\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlace}\r\n            />\r\n            <ConfirmPopup\r\n              isOpen={isConfirmPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onConfirmDelete={handleConfirm}\r\n            />\r\n          \r\n            <ImagePopup \r\n            name={selectedCard.name}\r\n            link={selectedCard.link}\r\n            isOpen={selectedCard.isImageOpen}\r\n            onClose={closeAllPopups}\r\n            />\r\n            \r\n          </div>\r\n        </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\reportWebVitals.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Footer.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ImagePopup.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Main.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Header.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\EditAvatarPopup.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ConfirmPopup.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\Api.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\contexts\\CurrentUserContext.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Login.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\InfoTooltip.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Register.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\auth.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\utils\\constant.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Card.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AuthInfo.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\PopupWithForm.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\AuthorizeForm.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\errors\\notAuthorizedError.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\errors\\badRequestError.js",[],"C:\\Users\\solat\\dev\\react-mesto-api-full\\frontend\\src\\components\\Form.js",[],{"ruleId":"222","replacedBy":"223"},{"ruleId":"224","replacedBy":"225"},{"ruleId":"226","severity":1,"message":"227","line":48,"column":28,"nodeType":"228","messageId":"229","endLine":48,"endColumn":45},{"ruleId":"222","replacedBy":"230"},{"ruleId":"224","replacedBy":"231"},{"ruleId":"226","severity":1,"message":"227","line":48,"column":28,"nodeType":"228","messageId":"229","endLine":48,"endColumn":45},{"ruleId":"232","severity":1,"message":"233","line":112,"column":5,"nodeType":"234","messageId":"235","endLine":112,"endColumn":30},"no-native-reassign",["236"],"no-negated-in-lhs",["237"],"no-unused-vars","'setAuthInfoOpened' is assigned a value but never used.","Identifier","unusedVar",["236"],["237"],"no-unreachable","Unreachable code.","ExpressionStatement","unreachableCode","no-global-assign","no-unsafe-negation"]